---
import { getEntry } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Hero from "@/components/sections/Hero/Hero.astro";
import { SUPPORTED_LOCALES, DEFAULT_LOCALE, getLocaleOrDefault } from "@/domain";
import type { Locale } from "@/domain";

export async function getStaticPaths() {
  const locales = SUPPORTED_LOCALES.filter((locale) => locale !== DEFAULT_LOCALE);

  return locales.map((locale) => ({
    params: { lang: locale },
  }));
}

const locale: Locale = getLocaleOrDefault(Astro.params.lang);

const heroContent = await getEntry("hero", `${locale}/home`);

if (!heroContent) {
  throw new Error(`Hero content not found: hero/${locale}/home.json`);
}

const { title, subtitle, primaryCta, secondaryCta } = heroContent.data;
---

<Layout title={title}>
  <main>
    <Hero title={title} subtitle={subtitle} primaryCta={primaryCta} secondaryCta={secondaryCta} />
  </main>
</Layout>
