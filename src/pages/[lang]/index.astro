---
import { getEntry } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Hero from "@/components/sections/Hero/Hero.astro";
import { SUPPORTED_LOCALES, DEFAULT_LOCALE } from "@/domain/entities/Locale";
import type { Locale } from "@/domain/entities/Locale";

export async function getStaticPaths() {
  // Generate paths for all non-default locales
  // Default locale (EN) is handled by /index.astro
  const locales = SUPPORTED_LOCALES.filter((locale) => locale !== DEFAULT_LOCALE);

  return locales.map((locale) => ({
    params: { lang: locale },
  }));
}

// Get locale from params
const locale = Astro.params.lang as Locale;

// Fetch hero content for the current locale
const heroContent = await getEntry("hero", `${locale}/home`);

if (!heroContent) {
  throw new Error(`Hero content not found for ${locale} locale`);
}

const { title, subtitle, primaryCta, secondaryCta } = heroContent.data;
---

<Layout title={title}>
  <main>
    <Hero title={title} subtitle={subtitle} primaryCta={primaryCta} secondaryCta={secondaryCta} />
  </main>
</Layout>
